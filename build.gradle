buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
        jcenter()
    }
    dependencies {
        classpath "com.gradle.publish:plugin-publish-plugin:0.9.7"
        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.1'
    }
}

group 'net.ossindex'
version '0.2.0-SNAPSHOT'

apply plugin: "com.gradle.plugin-publish"
apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'java-gradle-plugin'
apply plugin: 'com.github.johnrengelman.shadow'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile gradleApi()
    compile 'net.ossindex:ossindex-api:2.5.2'
    testCompile 'junit:junit:4.12'
    testCompile 'org.mockito:mockito-core:2.7.13'
    testCompile gradleTestKit()
    testCompile('org.spockframework:spock-core:1.0-groovy-2.4') {
        exclude module: 'groovy-all'
    }
}

pluginBundle {
    website = 'http://www.ossindex.net/'
    vcsUrl = 'https://github.com/ossindex/ossindex-gradle-plugin'
    description = 'Checks dependencies for known vulnerabilities'
    tags = ['cve', 'audit', 'security', 'dependencies']

    plugins {
        greetingsPlugin {
            id = 'net.ossindex.audit'
            displayName = 'OSSIndex Gradle Audit'
        }
    }
}

task showMeCache << {
    configurations.compile.each { println it }
}
